
#!/bin/bash

#setup

#based on info from https://surfer.nmr.mgh.harvard.edu/fswiki/mri_binarize

#to get ID codes for other regions, see /usr/local/freesurfer/FreeSurferColorLUT.txt

export SUBJECTS_DIR=/storage/gold/cinn/2019/SRfMRI/Freesurfer

masktime () {
mkdir -p /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/masks

mri_binarize --i /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/ThalamicNuclei.v10.T1.FSvoxelSpace.mgz --o /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/masks/Left-CM.mgz --match 8106

mri_binarize --i /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/ThalamicNuclei.v10.T1.FSvoxelSpace.mgz --o /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/masks/Left-Pf.mgz --match 8118

mri_binarize --i /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/ThalamicNuclei.v10.T1.FSvoxelSpace.mgz --o /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/masks/Right-CM.mgz --match 8206

mri_binarize --i /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/ThalamicNuclei.v10.T1.FSvoxelSpace.mgz --o /storage/gold/cinn/2019/SRfMRI/Freesurfer/$1/mri/masks/Right-Pf.mgz --match 8218
}

export -f masktime

parallel masktime ::: sub-001 sub-002 sub-003 sub-004 sub-005 sub-00006
